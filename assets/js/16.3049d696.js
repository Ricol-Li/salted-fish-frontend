(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{418:function(t,s,a){"use strict";a.r(s);var e=a(35),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"js-中堆栈内存的底层处理机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-中堆栈内存的底层处理机制"}},[t._v("#")]),t._v(" JS 中堆栈内存的底层处理机制")]),t._v(" "),a("ul",[a("li",[t._v("堆（Heap）、栈（Stack）")]),t._v(" "),a("li",[t._v("ECStack（Execution Context Stack）和 EC（Execution Context）")]),t._v(" "),a("li",[t._v("GO（Global Object）和 VO（Varibale Object）")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("strong",[t._v("特殊：在全局上下文中，基于 let 或者 const 声明的变量，是存储在 VO(G)中的，但是基于 var/function 声明的变量，是直接存储在 GO 中的，但是严格意义来讲，基于 var/function 声明的变量不能成为全局变量，仅仅是全局对象中的一个属性而已")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/GOVOECStack_1.jpg",alt:"GOVOAOECStack"}})]),t._v(" "),a("h2",{attrs:{id:"js-中的堆-heap-栈-stack-内存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-中的堆-heap-栈-stack-内存"}},[t._v("#")]),t._v(" JS 中的堆（Heap）栈（Stack）内存")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("都是在计算机内存中开辟的空间")])]),t._v(" "),a("ul",[a("li",[t._v("栈内存 Stack，ECStack（Execution Context Stack）\n"),a("ul",[a("li",[t._v("存储原始值类型值")]),t._v(" "),a("li",[t._v("代码执行的环境")])])]),t._v(" "),a("li",[t._v("堆内存 Heap\n"),a("ul",[a("li",[t._v("存储对象类型值")])])])]),t._v(" "),a("h2",{attrs:{id:"ec-execution-context-执行上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ec-execution-context-执行上下文"}},[t._v("#")]),t._v(" EC（Execution Context）执行上下文")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("区分代码的执行环境")])]),t._v(" "),a("ul",[a("li",[t._v("常见上下文分类\n"),a("ul",[a("li",[t._v("全局上下文 EC(G)")]),t._v(" "),a("li",[t._v("函数私有上下文 EC(?)")]),t._v(" "),a("li",[t._v("块级私有上下文 EC(BLOCK)")])])]),t._v(" "),a("li",[t._v("产生私有上下文->进栈执行->出栈释放（可能释放）")]),t._v(" "),a("li",[t._v("变量对象：当前上下文中，用来存储声明的变量的地方\n"),a("ul",[a("li",[t._v("VO(Varibale Object): VO(G)或者 VO(BLOCK)")]),t._v(" "),a("li",[t._v("AO(Active Object): AO，AO 是 VO 的分支，存在私有上下文中")])])])]),t._v(" "),a("h2",{attrs:{id:"go-global-object-全局对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go-global-object-全局对象"}},[t._v("#")]),t._v(" GO(Global Object)全局对象")]),t._v(" "),a("ul",[a("li",[t._v("window 指向 GO 对象")]),t._v(" "),a("li",[t._v("全局上下文中，基于 var/function 声明的变量是直接存储到 GO 对象上的；而基于 let/const 声明的变量才是放在 VO(G)中的")])]),t._v(" "),a("h2",{attrs:{id:"let-变量-值-发生了什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#let-变量-值-发生了什么"}},[t._v("#")]),t._v(" let 变量 = 值 发生了什么？")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("第一步：创建值")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("原始值类型：直接存储在栈内存中，按值操作")])]),t._v(" "),a("li",[a("p",[t._v("对象类型值：按照堆内存地址来操作")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("对象：开辟一个堆内存空间(16 进制地址)、依次存储对象的键值对、把空间地址赋值给变量")])]),t._v(" "),a("li",[a("p",[t._v("函数：内存空间中存储三部分信息")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("作用域 [[scope]]：当前所处上下文")])]),t._v(" "),a("li",[a("p",[t._v("函数体中的代码字符串")])]),t._v(" "),a("li",[a("p",[t._v("当做普通对象存储的静态属性和方法「name & length」")])])])])])])])]),t._v(" "),a("li",[a("p",[t._v("第二步：声明变量 declare")])]),t._v(" "),a("li",[a("p",[t._v("第三步：变量和值关联在一起（赋值） defined")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置断点调试，代码运行到这个断点处，就暂停了，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 接下来我们在控制台基于F10(逐过程)/F11(逐语句)控制代码一步步的执行，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 并且监测到每一步执行的结果")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("debugger")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\nz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/declare_1.png",alt:"declare"}}),t._v(" "),a("img",{attrs:{src:"/images/declare_2.png",alt:"declare"}})]),t._v(" "),a("h2",{attrs:{id:"练习题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#练习题"}},[t._v("#")]),t._v(" 练习题")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 示例1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("n")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a\na"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("n")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence",target:"_blank",rel:"noopener noreferrer"}},[t._v("先来看看运算符优先级"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以理解为 y = 10 x = 10「或者x=y」")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据运算符优先级，对象成员访问的优先级为18，高于赋值的优先级2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以obj.x = 10 y = 10")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以在示例1中 a.x = {n:2} a = {n:2}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/GOVOECStack_2.jpg",alt:"GOVOAOECStack"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);